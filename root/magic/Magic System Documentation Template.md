# Magic System Documentation

## Core Principles
### Mana Mechanics
- Base mana pool calculation: `Intelligence × 100 + Level × 50`
- Mana regeneration rate: `(Intelligence × 0.5 + Wisdom × 0.3)% per minute`
- Mana efficiency: Increases with skill level and affinity
- Overcharge mechanics: Allows temporary mana boost at cost of health

### Affinities
1. Primary Affinities
   - Fire: Destruction, passion, transformation
   - Water: Flexibility, healing, adaptation
   - Earth: Stability, defense, growth
   - Air: Freedom, speed, connection
   - Light: Purification, enhancement, revelation
   - Dark: Absorption, corruption, concealment

2. Compound Affinities
   - Steam (Fire + Water): Enhanced healing, purification
   - Magma (Fire + Earth): Destruction, area control
   - Lightning (Air + Fire): Speed, precision strikes
   - Crystal (Earth + Light): Enhancement, protection
   - Shadow (Dark + Air): Stealth, illusion
   - Blood (Water + Dark): Life manipulation, cursing

### Spell Categories
1. Instant Spells
   - Cast Time: 0-2 seconds
   - Mana Cost: Low to Medium
   - Effect Duration: Instant to 5 seconds
   - Example: Marcus's basic healing

2. Channeled Spells
   - Cast Time: 3-10 seconds
   - Mana Cost: Medium to High
   - Effect Duration: While channeling
   - Example: Advanced restoration magic

3. Ritual Spells
   - Cast Time: Minutes to hours
   - Mana Cost: Very High
   - Effect Duration: Hours to permanent
   - Example: Elara's leg restoration

## Power Scaling
### Spell Power Calculation
```
Base Power = (Mana Cost × Affinity Multiplier × Intelligence Modifier)
Final Power = Base Power × (1 + Skill Level/100) × Environmental Factors
```

### Efficiency Metrics
- Mana cost reduction per skill level: 0.5%
- Maximum cost reduction: 75%
- Critical cast chance: `Intelligence × 0.1%`
- Critical power multiplier: 2x - 5x based on skill

### Progression System
1. Novice (Levels 1-10)
   - Single affinity spells
   - Basic mana control
   - Limited spell combinations

2. Adept (Levels 11-30)
   - Dual affinity manipulation
   - Enhanced mana control
   - Basic spell creation

3. Expert (Levels 31-60)
   - Multiple affinity mastery
   - Advanced mana manipulation
   - Custom spell creation

4. Master (Levels 61-90)
   - Perfect affinity control
   - Mana field manipulation
   - Spell innovation

5. Grandmaster (Levels 91-100)
   - Reality manipulation
   - Mana world creation
   - Law manipulation

## Special Cases
### Time Magic Integration
- Requires minimum Intelligence: 200
- Base mana cost: 1000 per second of manipulation
- Cooldown: 24 hours real-time
- Side effects: Temporal backlash, memory strain

### Unique Abilities
1. Marcus's Restoration
   - Classification: SSS-Rank
   - Requirements: 
     - Intelligence > 300
     - Light Affinity > 80
     - Nature Affinity > 60
   - Special effect: True Restoration (beyond normal healing)

2. Divine Interactions
   - Keeper of Chains influence: -30% to chaos-based spells
   - Weaver of Stars blessing: +30% to transformation magic
   - Divine mana consumption: 10x normal cost

## Balance Considerations
### PvE Combat
- Monster resistance scaling: `Level × 1.5`
- Boss immunity thresholds: `Player_Level × 2`
- Environmental damage multipliers: 0.5x - 3x

### PvP Balance
- Damage reduction in PvP: 30%
- Crowd control duration: Maximum 5 seconds
- Ultimate ability restrictions: One per combat

### Anti-Abuse Measures
1. Spell Spam Prevention
   - Global cooldown: 1.5 seconds
   - Diminishing returns on repeated spells
   - Mana burnout threshold

2. Exploit Prevention
   - Time magic restrictions
   - Area effect limitations
   - Healing reduction in combat

## Documentation Notes
- Update frequency: Weekly
- Version control: Major.Minor.Patch
- Testing requirements: 20 hours minimum
- Balance review: Monthly